<!doctype html>
<html>
 <head>
  <link rel="stylesheet" type="text/css" href="/narrative/static/style/style.min.css">
  <link rel="stylesheet" type="text/css" href="/narrative/static/kbase/css/kbaseStylesheet.css" >
 </head>
 <body>
 <body>
 <nav>
  <div class="container-fluid kb-html-report">
    <div class="panel panel-default">
	  <ul class="nav nav-tabs" role="tablist" id="navigation">
	   {% for tab_name in tabs.keys() %}
		<li class="nav-item">
			<a class="nav-link" data-toggle="tab" role="tab"
			href="#{{tab_name}}" id="{{tab_name}}-tab"
			aria-controls="{{tab_name}}" aria-selected="true">{{tab_name}}</a>
		</li>
	   {% endfor %}
	  </ul>
    </div>
  </div>
 </nav>
 {% for tab_name, tab in tabs.items() %}
 <section id="{{tab_name}}" {% if loop.first %}class="active"{% endif %}>
  <h1>{{tab_name}}</h1>
  <h1>Prediction Results</h1>
  {{ tab.df }}
  <img src="{{tab.label_image}}"/>
 <hr />
  <h1>Feature Importance</h1>
  <img src="{{tab.feature_image}}"/>

 </section>
 {% endfor %}
 <script>
  const here = new URL(window.location.href)
  const tabs = [...document.querySelectorAll('section')].map(tab => tab.id)
  const tab_active = here.hash.slice(1) || tabs[0]
  const tabs_hide = () => tabs.forEach(tab => {
    const tabDOM = document.getElementById(tab)
    tabDOM.classList.forEach(cls => {
        tabDOM.classList.remove(cls)
    })
  })
  const tab_activate = (tab) => {
    const tabDOM = document.getElementById(tab)
    tabDOM.classList.add("active")
  }
  const tab_select = (tab) => {
    tabs_hide()
    tab_activate(tab)
  }
  tab_select(tab_active)
  const links = document.querySelectorAll("a.nav-link")
  const handler = (evt) => {
    evt.preventDefault()
    tab = evt.target.id.slice(0, -4)
    tab_select(tab)
  }
  links.forEach(link => link.addEventListener('click', handler))
 </script>
 <style>
  section {
   display: none;
  }
  .active{
   display: block;
  }
  table {
  border-collapse: collapse;
  width: 50%;
  }

  td {
  text-align: center;
  padding: 8px;
  }
  tr:nth-child(even) {background-color: #f2f2f2;}
  th {
  text-align: center;
  padding: 8px;
  background-color: #808080;
  color: white;
   }
 </style>
 </body>
</html>
